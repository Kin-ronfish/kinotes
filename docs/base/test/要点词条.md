# JavaScript

## å˜é‡å®šä¹‰

varï¼ˆå…¨å±€å˜é‡ï¼‰ï¼Œletï¼ˆå±€éƒ¨å˜é‡ï¼‰ï¼Œconstï¼ˆå¸¸é‡ï¼‰

> let ä¸èƒ½åœ¨å®šä¹‰ä¹‹å‰è®¿é—®è¯¥å˜é‡ï¼Œä¸èƒ½è¢«é‡æ–°å®šä¹‰ï¼Œæ— æ³•åœ¨ä½œç”¨åŸŸå¤–è°ƒç”¨
>
> constå®šä¹‰çš„å€¼ä¸å¯ä¿®æ”¹ï¼Œä¸èƒ½è¢«é‡æ–°å®šä¹‰
>
> !!num : å°†æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºå¸ƒå°”å€¼

## ç±»å‹è½¬æ¢

å†…ç½®æ•°æ®ç±»å‹ï¼š `null`ï¼Œ`undefined`ï¼Œ`boolean`ï¼Œ`number`ï¼Œ`string`ï¼Œ`symbol`

typeofå¯¹äºåŸºæœ¬ç±»å‹ï¼Œé™¤äº† `null` éƒ½å¯ä»¥æ˜¾ç¤ºæ­£ç¡®çš„ç±»å‹

Booleané™¤äº† `undefined`ï¼Œ `null`ï¼Œ `false`ï¼Œ `NaN`ï¼Œ `''`ï¼Œ `0`ï¼Œ `-0`ï¼Œå…¶ä»–å€¼éƒ½è½¬ä¸º true

å››åˆ™è¿ç®—ï¼šæ•°å€¼è¿æ¥å­—ç¬¦ä¸²=>å­—ç¬¦ä¸²ï¼›æ•°ç»„ä¸å­—ç¬¦ä¸²è¿æ¥åªå–[]å†…çš„å†…å®¹

## å‡½æ•°å®šä¹‰

```javascript
function fun(name, age=2){} // è®¾ç½®é»˜è®¤å€¼(ES6)ï¼Œä¸èƒ½æ²¹åŒåå‚æ•°
(a,b) => {a+b} // ç®­å¤´å‡½æ•°ï¼ŒåŒä¸€è¡Œå¯çœç•¥{}ï¼Œå•å‚æ•°å¯çœç•¥()ï¼Œæ— å‚æ•°å¿…é¡»ä¿ç•™
```

> this: å‡½æ•°ä¸­æ‰€å±çš„å¯¹è±¡ï¼›å•ç‹¬ä½¿ç”¨ä¸ºå…¨å±€å¯¹è±¡ï¼›ä¸¥æ ¼æ¨¡å¼æœªå®šä¹‰ï¼›ç®­å¤´å‡½æ•°å¤–å±‚thiså¯¹è±¡

## å…³é”®å­—

### new

è¿ç®—ç¬¦ä¼˜å…ˆçº§

```javascript
function Foo() {
    return this;
}
Foo.getName = function () {
    console.log('1');
};
Foo.prototype.getName = function () {
    console.log('2');
};

new Foo.getName();   // -> 1ï¼Œæ‰§è¡ŒgetName()
new Foo().getName(); // -> 2ï¼Œæ‰§è¡ŒFoo()äº§ç”Ÿå®ä¾‹ï¼Œå†é€šè¿‡åŸå‹é“¾æ‰¾åˆ°getName()
```

> new Foo() çš„ä¼˜å…ˆçº§å¤§äº new Foo

## å†…ç½®å¯¹è±¡

instanceofåˆ¤æ–­å¯¹è±¡çš„ç±»å‹

### Object

åˆ›å»ºåŠè°ƒç”¨æ–¹å¼

```javascript
obj = {name: 'Kin', age: 15}
obj.name = 'Lin' // ç›´æ¥è°ƒç”¨
obj['name'] = 'Lin' //keyå€¼è°ƒç”¨
obj.sex = 'ç”·' // åŠ keyå¹¶èµ‹å€¼
test = {test: '1', ...obj} //(ES6)å¯¹è±¡è§£æ„
Object.assign(obj,{email: '1451@de.com'}) // (ES6)å¯¹è±¡åŠ å€¼
Object.is("1","1") // (ES6)ä¸'==='ç±»ä¼¼
```

> ES6å±æ€§åä¸å±æ€§å€¼ç›¸åŒæ—¶åªå†™ä¸€ä¸ª
>
> ES6å‡½æ•°åä»¥å˜é‡æ˜¾ç¤ºéœ€åŠ []
>
> prototypeå¯¹è±¡æ˜¯åŸå§‹å¯¹è±¡ï¼Œå¯é€šè¿‡æ­¤å¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•
>
> æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ `__proto__` å±æ€§ï¼Œå¯¹è±¡å¯ä»¥é€šè¿‡ `__proto__` æ¥å¯»æ‰¾ä¸å±äºè¯¥å¯¹è±¡çš„å±æ€§ï¼Œ`__proto__` å°†å¯¹è±¡è¿æ¥èµ·æ¥ç»„æˆäº†åŸå‹é“¾

### Number

æ•°å€¼ç±»å‹çš„è½¬æ¢ï¼Œé»˜è®¤ä¸ºæµ®ç‚¹å‹

```javascript
parseFloat() // è½¬æµ®ç‚¹å‹
parseInt() // è½¬æ•´å‹
isNaN() //æ˜¯å¦ä¸ºç©º
```

### String

å­—ç¬¦ä¸²æ“ä½œ

```javascript
str.charAt(index) //è·å–æŒ‡å®šç´¢å¼•çš„å­—ç¬¦
str.concat(string) //è¿æ¥å¤šä¸ªå­—ç¬¦ä¸²
str.indexOf(char) //è·å–å­—ç¬¦ä¸²ä¸­æŒ‡å®šå­ä¸²çš„ç´¢å¼•
str.replace(string, string) //å­—ç¬¦ä¸²çš„æ›¿æ¢
str.substr() //å‚æ•°ï¼šç´¢å¼•ã€é•¿åº¦ï¼Œæˆªå–å­—ç¬¦ä¸²é•¿åº¦ï¼Œé•¿åº¦ä¸ºé€‰å¡«å‚æ•°
str.split(string) //ä»¥æŒ‡å®šå­ä¸²å°†å­—ç¬¦ä¸²åˆ†å‰²ä¸ºæ•°ç»„
str.includes("hello") //(ES6)åˆ¤æ–­æ˜¯å¦å­˜åœ¨å­—ç¬¦ä¸²
str.startsWith("he") //(ES6)åˆ¤æ–­å¤´éƒ¨æ˜¯å¦ä¸ºæ­¤å­—ç¬¦ä¸²
str.endsWith("Kin") //(ES6)åˆ¤æ–­å°¾éƒ¨
str.repeat(3) //(ES6)å­—ç¬¦ä¸²é‡å¤
```

> å­—ç¬¦ä¸²åå¼•å·å¯ä»¥ä¼ å…¥ä¸€ä¸ªå˜é‡å€¼

### Date

è·å–æ—¶é—´

> [dayjsæ—¶é—´å¤„ç†æ’ä»¶](https://dayjs.fenxianglu.cn/)

### Array

æ•°ç»„æ“ä½œ

```javascript
array.concat(arr,arr) //å‚æ•°ï¼šä¸¤ä¸ªæ•°ç»„ï¼Œåˆå¹¶æ•°ç»„
array.pop() //åˆ é™¤æ•°ç»„å°¾éƒ¨
array.shift() //åˆ é™¤æ•°ç»„å¤´éƒ¨
array.push(val) //æ•°ç»„å°¾éƒ¨è¿½åŠ 
array.splice(index,num) //å‚æ•°ï¼šç´¢å¼•ã€ä¸ªæ•°ï¼Œåˆ é™¤æŒ‡å®šç´¢å¼•çš„æ•°å€¼
array.sort(arr) //æ’åº
array.reverse(arr) //è½¬ç½®
array.toString(arr) //æ•°ç»„è½¬å­—ç¬¦ä¸²
array.join(str|num) //å‚æ•°ï¼šå­—ç¬¦ä¸²æˆ–æ•°å€¼ï¼Œä»¥æŒ‡å®šå†…å®¹ä¸ºè¿æ¥ç¬¦å°†æ•°ç»„è½¬åŒ–ä¸ºå­—ç¬¦ä¸²

for(let item of arr){} // ä¾¿åˆ©æ•°ç»„ï¼Œç±»æ•°ç»„çš„å¯¹è±¡
for(let item in obj){} // ä¾¿åˆ©å¯¹è±¡
forEach(function) //æ•°ç»„å¾ªç¯ï¼Œæ— è¿”å›å€¼
map(function) // å¤„ç†æ•°ç»„æ¯ä¸€é¡¹å¹¶è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œä¾‹ï¼šå¯¹æ•°ç»„æ¯ä¸€é¡¹åŠ ä¸Š1
filter(function) // è¿‡æ»¤ä¸ç¬¦åˆæ¡ä»¶çš„å†…å®¹ï¼Œå³ï¼šreturnä¸€ä¸ªtrueçš„ç»“æœ
reduce(function) // æ•°ç»„æ¯å¤„ç†å¥½ä¸€é¡¹ï¼Œè¿”å›ä¸€ä¸ªå€¼
of(param) //(ES6)å°†è¾“å…¥çš„å‚æ•°åˆä¸ºä¸€ä¸ªæ•°ç»„
from(arr) //(ES6)å°†ç±»æ•°ç»„å¯¹è±¡æˆ–å¯è¿­ä»£å¯¹è±¡è½¬åŒ–ä¸ºæ•°ç»„
arr = {0:'1',1:'2',2:'3',length:3}; //ç±»æ•°ç»„å¯¹è±¡å†™æ³•
find(function) //(ES6)æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œå¦‚æœ‰å¤šä¸ªï¼Œåªè¿”å›ç¬¬ä¸€ä¸ª
findIndex(function) //(ES6)åŒä¸Šï¼Œä½†åªè¿”å›ç´¢å¼•
fill(startindex,val,endindex) //æ ¹æ®ç´¢å¼•åŒºé—´è·Ÿæ¢å€¼
entries() //éå†é”®å€¼å¯¹
keys() //éå†é”®å
values() //éå†é”®å€¼
includes() //æ•°ç»„æ˜¯å¦åŒ…å«æŒ‡å®šå€¼
...arr //(ES6)æ•°ç»„è§£æ„
```

### Math

```javascript
Math.round() //å››èˆäº”å…¥
Math.floor(Math.random()*10) //ç”Ÿæˆ [0,9] çš„éšæœºæ•°
Math.floor(Math.random()*10)+n //ç”Ÿæˆ [0+n,9+n] çš„éšæœºæ•°
Math.floor(Math.random()*n*10) //ç”Ÿæˆ [0,n*10-1] çš„éšæœºæ•°
Math.floor(Math.random()*(n-m+1))+m //ç”Ÿæˆ [m,n] çš„éšæœºæ•°
```

### RegExp

```javascript
var pat=new RegExp("e")
pat.test("The best things") //æœç´¢å­—ç¬¦ä¸²æŒ‡å®šçš„å€¼ï¼Œè¿”å›çœŸæˆ–å‡
pat.exec("The best things") //æ£€ç´¢å­—ç¬¦ä¸²æŒ‡å®šçš„å€¼ï¼Œè¿”å›è¢«æ‰¾åˆ°çš„å€¼æˆ–è¿”å›null
```

### Symbol

symbol(ES6)å®šä¹‰çš„å±æ€§å€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ï¼Œæœ‰å¤šç§å†™æ³•

```javascript
let sy = Symbol("key")
let syObject = {}
syObject[sy] = "kk"
console.log(syObject) // {Symbol(key1): "kk"}
```

### Promise

Promiseæ˜¯ES6æ–°å¢åŠ çš„ç±»ï¼Œç›®çš„æ˜¯æ›´åŠ ä¼˜é›…åœ°ä¹¦å†™å¤æ‚çš„å¼‚æ­¥ä»»åŠ¡

```javascript
const p1 = new Promise(function(resolve,reject){    
    resolve('success'); //æˆåŠŸæ—¶è¿”å›çš„å‡½æ•°    
    reject('fail'); //å¤±è´¥æ—¶è¿”å›çš„å‡½æ•°
});
p1.then(function(value){ //thenæ–¹æ³•æ¥æ”¶resolveå’Œrejectå‡½æ•°
    console.log(value);
});
```

> promiseæ‰§è¡Œæ—¶æ— æ³•ä¸­é€”å–æ¶ˆ

### Generatorå‡½æ•°

åœ¨functionåæœ‰ä¸ª*ï¼Œå‡½æ•°å†…éƒ¨æœ‰yieldè¡¨è¾¾å¼

å‡½æ•°é€šè¿‡next()æ–¹æ³•è°ƒç”¨ï¼Œå‡½æ•°æ‰§è¡Œè‡³yieIdæ—¶åœæ­¢æ‰§è¡Œå¹¶è¿”å›ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€å¯¹è±¡çš„æŒ‡é’ˆ

```javascript
function* fun(){  
    console.log('one');  
    yieId '1';  
    console.log("two");  
    yield '2';  
    console.log("three");  
    return '3';
}
var f = fun();
f.next();
```

### asyncå‡½æ•°

async å‡½æ•°è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ then æ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°

await æ“ä½œç¬¦ç”¨äºç­‰å¾…ä¸€ä¸ª Promise å¯¹è±¡, å®ƒåªèƒ½åœ¨å¼‚æ­¥å‡½æ•° async function å†…éƒ¨ä½¿ç”¨

```javascript
async function fun(){
    const data = await get('xx')
}
```



## æ•°æ®å­˜å‚¨

```javascript
localStorage.setItem(key,value); //ä¿å­˜æ•°æ®
localStorage.getItem(key); //è¯»å–æ•°æ®
localStorage.removeItem(key); //åˆ é™¤å•ä¸ªæ•°æ®
localStorage.clear(); //åˆ é™¤æ‰€æœ‰æ•°æ®
localStorage.key(index); //å¾—åˆ°æŸä¸ªç´¢å¼•çš„key
```

> sessionStorageä¸localStorageç›¸åŒ

## DOM

```javascript
document.getElementById("id_name"); //è·å–å•ä¸ªID
document.getElementsByTagName("p"); //è¿”å›HTMLCollection(æ ‡ç­¾)å¯¹è±¡æ•°ç»„
document.getElementsByClassName("class_name"); //è¿”å›NodeList(ç±»)å¯¹è±¡æ•°ç»„
document.querySelector("#app");//å†…éƒ¨æ‰€æœ‰çš„æ ‡ç­¾å’Œå±æ€§
// èŠ‚ç‚¹å’Œå±æ€§æ“ä½œ
var tmp = document.getElementById("id_name")
tmp.createElement("p") //åˆ›å»º<p>å…ƒç´ 
tmp.appendChild("a") //æ·»åŠ <a>å…ƒç´ 
tmp.removeChild("a") //ç§»é™¤<a>å…ƒç´ 
tmp.getAttribute //è·å–å±æ€§
tmp.setAttribute //è®¾ç½®å±æ€§
tmp.removeAttribute //åˆ é™¤å±æ€§
```

## å‡½æ•°æ–¹æ³•

### æ•°ç»„æ“ä½œ

> åˆ¤æ–­æ•°ç»„ä¸­çš„æ‰€æœ‰å€¼æ˜¯å¦éƒ½æ»¡è¶³æ¡ä»¶

```js
const all = (arr, fn = Boolean) => arr.every(fn);
```

```js
all([4, 2, 3], x => x > 1); // true
all([1, 2, 3]); // true
```

> åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å€¼

```js
const any = (arr, fn = Boolean) => arr.some(fn);
```

```js
any([0, 1, 2, 0], x => x >= 2); // true
any([0, 0, 1, 0]); // true
```

> åˆ¤æ–­æ•°ç»„çš„æ‰€æœ‰å€¼æ˜¯å¦éƒ½ç›¸åŒ

```js
const allEqual = arr => arr.every(val => val === arr[0]);
```

```js
allEqual([1, 2, 3, 4, 5, 6]); // false
allEqual([1, 1, 1, 1]); // true
```

> åˆ¤æ–­æ•°ç»„çš„æ‰€æœ‰å€¼æ˜¯å¦éƒ½ç›¸åŒï¼ŒåŠ å…¥æ•°å­¦æ ¼å¼å…¬å¼

```js
const allEqualBy = (arr, fn) => {
  const eql = fn(arr[0]);
  return arr.every(val => fn(val) === eql);
};
```

```js
allEqualBy([1.1, 1.2, 1.3], Math.round); // true
allEqualBy([1.1, 1.3, 1.6], Math.round); // false
```

> åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºé€’å¢å¼æ•°ç»„

```js
const allUnique = arr => arr.length === new Set(arr).size;
```

```js
allUnique([1, 2, 3, 4]); // true
allUnique([1, 1, 2, 3]); // false
```

> åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºé€’å¢å¼æ•°ç»„ï¼ŒåŠ å…¥æ•°å­¦æ ¼å¼å…¬å¼

```js
const allUniqueBy = (arr, fn) => arr.length === new Set(arr.map(fn)).size;
```

```js
allUniqueBy([1.2, 2.4, 2.9], Math.round); // true
allUniqueBy([1.2, 2.3, 2.4], Math.round); // false
```

> æŠŠä¸€ç»´æ•°ç»„è½¬ä¸ºäºŒç»´æ•°ç»„

```js
const aperture = (n, arr) => // nä¸ºå†…éƒ¨æ•°ç»„é•¿åº¦
  n > arr.length
    ? []
    : arr.slice(n - 1).map((v, i) => arr.slice(i, i + n));
```

```js
aperture(2, [1, 2, 3, 4]); // [[1, 2], [2, 3], [3, 4]]
aperture(3, [1, 2, 3, 4]); // [[1, 2, 3], [2, 3, 4]]
aperture(5, [1, 2, 3, 4]); // []
```

> åˆ›å»ºä¸€ä¸ªæŒ‡å®šå…¬å·®å’ŒæŒ‡å®šç»“æŸå€¼çš„ç­‰å·®æ•°åˆ—

```js
const arithmeticProgression  = (n, lim) =>
  Array.from({ length: Math.ceil(lim / n) }, (_, i) => (i + 1) * n );
```

```js
arithmeticProgression(5, 25); // [5, 10, 15, 20, 25]
```

> æ•°ç»„è½¬CSVæ ¼å¼

```js
const arrayToCSV = (arr, delimiter = ',') =>
  arr
    .map(v =>
      v.map(x => (isNaN(x) ? `"${x.replace(/"/g, '""')}"` : x)).join(delimiter)
    )
    .join('\n');
```

```js
arrayToCSV([['a', 'b'], ['c', 'd']]); // '"a","b"\n"c","d"'
arrayToCSV([['a', 'b'], ['c', 'd']], ';'); // '"a";"b"\n"c";"d"'
arrayToCSV([['a', '"b" great'], ['c', 3.1415]]);
// '"a","""b"" great"\n"c",3.1415'
```

> æ•°ç»„æ±‚å¹³å‡æ•°

```js
const average = (...nums) =>
  nums.reduce((acc, val) => acc + val, 0) / nums.length;
```

```js
average(...[1, 2, 3]); // 2
average(1, 2, 3); // 2
```

```js
const converge = (converger, fns) => (...args) =>
  converger(...fns.map(fn => fn.apply(null, args)));
```

```js
const average = converge((a, b) => a / b, [
  arr => arr.reduce((a, v) => a + v, 0),
  arr => arr.length
]);
average([1, 2, 3, 4, 5, 6, 7]); // 4
```

> æ±‚å¯¹è±¡æ•°ç»„ä¸­çš„å¹³å‡æ•°

```js
const averageBy = (arr, fn) =>
  arr
    .map(typeof fn === 'function' ? fn : val => val[fn])
    .reduce((acc, val) => acc + val, 0) / arr.length;
```

```js
averageBy([{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }], o => o.n); // 5
averageBy([{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }], 'n'); // 5
```

> æ ¹æ®ä¼ å…¥çš„æ•°ç»„å’Œåˆ¤æ–­æ•°ç»„ï¼Œè¾“å‡ºä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œå¹¶å°†åŸæ•°ç»„é‡Œæ˜¾ç¤ºfalseç´¢å¼•çš„å€¼å–å‡ºï¼Œæ”¾åˆ°å¦å¤–ä¸€ä¸ªæ•°ç»„ä¸­

```js
const bifurcate = (arr, filter) =>
  arr.reduce((acc, val, i) => (acc[filter[i] ? 0 : 1].push(val), acc), [
    [],
    [],
  ]);
```

```js
bifurcate(['beep', 'boop', 'foo', 'bar'], [true, true, false, true]);
// [ ['beep', 'boop', 'bar'], ['foo'] ]
```

> ä¸ä¸Šé¢çš„æ•ˆæœç›¸åŒï¼Œåªæ˜¯åŠ å…¥äº†æ¡ä»¶

```js
const bifurcateBy = (arr, fn) =>
  arr.reduce((acc, val, i) => (acc[fn(val, i) ? 0 : 1].push(val), acc), [
    [],
    [],
  ]);
```

```js
bifurcateBy(['beep', 'boop', 'foo', 'bar'], x => x[0] === 'b');
// [ ['beep', 'boop', 'bar'], ['foo'] ]
```

> å°†å­—ç¬¦ä¸²æ•°ç»„è½¬ä¸ºæ•°å€¼æ•°ç»„

```js
const binary = fn => (a, b) => fn(a, b);
```

```js
['2', '1', '0'].map(binary(Math.max)); // [2, 1, 2]
```

> ä¼ å…¥ä¸€ä¸ªå€¼ï¼Œè¿”å›å…¶ç´¢å¼•å€¼

```js
const binarySearch = (arr, item) => {
  let l = 0,
    r = arr.length - 1;
  while (l <= r) {
    const mid = Math.floor((l + r) / 2);
    const guess = arr[mid];
    if (guess === item) return mid;
    if (guess > item) r = mid - 1;
    else l = mid + 1;
  }
  return -1;
};
```

```js
binarySearch([1, 2, 3, 4, 5], 1); // 0
binarySearch([1, 2, 3, 4, 5], 5); // 4
binarySearch([1, 2, 3, 4, 5], 6); // -1
```

> ç¬¬né¡¹ç­‰äºå‰é¢æ‰€æœ‰é¡¹çš„ç´¯åŠ  n = n + Sn

```js
const accumulate = (...nums) =>
  nums.reduce((acc, n) => [...acc, n + +acc.slice(-1)], []);
```

```js
accumulate(1, 2, 3, 4); // [1, 3, 6, 10]
accumulate(...[1, 2, 3, 4]); // [1, 3, 6, 10]
```

### å­—ç¬¦æ“ä½œ

> å°†å­—ç¬¦ä¸²è½¬æ¢æˆbase64æ ¼å¼

```js
const atob = str => Buffer.from(str, 'base64').toString('binary');
```

```js
atob('Zm9vYmFy'); // 'foobar'
```

> å°†base64æ ¼å¼è½¬æ¢æˆå­—ç¬¦ä¸²

```js
const btoa = str => Buffer.from(str, 'binary').toString('base64');
```

```js
btoa('foobar'); // 'Zm9vYmFy'
```

> è¾“å‡ºå­—ç¬¦ä¸²é•¿åº¦

```js
const byteSize = str => new Blob([str]).size;
```

```js
byteSize('ğŸ˜€'); // 4
byteSize('Hello World'); // 11
```

> å­—ç¬¦ç¼–ç ç§»ä½

```js
const caesarCipher = (str, shift, decrypt = false) => {
  const s = decrypt ? (26 - shift) % 26 : shift;
  const n = s > 0 ? s : 26 + (s % 26);
  return [...str]
    .map((l, i) => {
      const c = str.charCodeAt(i);
      if (c >= 65 && c <= 90)
        return String.fromCharCode(((c - 65 + n) % 26) + 65);
      if (c >= 97 && c <= 122)
        return String.fromCharCode(((c - 97 + n) % 26) + 97);
      return l;
    })
    .join('');
};
```

```js
caesarCipher('Hello World!', -3); // 'Ebiil Tloia!'
caesarCipher('Ebiil Tloia!', 23, true); // 'Hello World!'
```

> å°†å•è¯çš„é¦–å­—æ¯è½¬ä¸ºå¤§å†™

```js
const capitalizeEveryWord = str =>
  str.replace(/\b[a-z]/g, char => char.toUpperCase());
```

```js
capitalizeEveryWord('hello world!'); // 'Hello World!'
```
